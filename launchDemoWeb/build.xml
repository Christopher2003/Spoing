<project name="launchWeb" basedir="." default="assemble">

  <property name="src.dir"     value="src"/>
  <property name="bin.dir"     value="bin"/>

  <property name="main-class"  value="org.reldb.spoing.demo.MainProd"/>

  <target name="clean">
    <delete dir="${build.dir}"/>
  </target>

  <target name="compile">
    <mkdir dir="${bin.dir}"/>
    <javac srcdir="${src.dir}" destdir="${bin.dir}" includeantruntime="false"/>
  </target>

  <target name="assemble" depends="compile">
    <delete includeEmptyDirs="true" quiet="true">
      <fileset dir="WebContent/WEB-INF/lib" />
      <fileset dir="tomcat.*"/>
      <fileset dir="WebContent/rwt-resources"/>
    </delete>
    <copy todir="WebContent/WEB-INF/lib" includeEmptyDirs="false">
      <fileset dir="../_Deploy/lib/misc"/>
      <fileset dir="../_Deploy/lib/rwt"/>
      <fileset dir="../_Deploy/lib/spoing">
	<exclude name="*desktop*"/>
	<exclude name="linux*/*"/>
	<exclude name="macos*/*"/>
	<exclude name="win*/*"/>
      </fileset>
    </copy>
  </target>

  <target name="run" depends="assemble">
    <java jar="${lib.dir}/${ant.project.name}.jar" fork="true"/>
  </target>

  <target name="clean-build" depends="clean,assemble"/>

  <target name="main" depends="clean-build"/>

</project>
